# 水印文件本地应用

一个功能完整的跨平台水印应用，支持Windows和MacOS。提供直观的GUI界面，支持文本和图片水印，实时预览，批量处理等功能。

## 🚀 功能特性

### 文件处理
- 📁 **导入图片**：支持单张图片拖拽或文件选择器导入
- 📂 **批量导入**：一次性选择多张图片或导入整个文件夹
- 🖼️ **缩略图列表**：在界面上显示已导入图片的缩略图和文件名
- 📤 **导出图片**：自定义输出文件夹，防止覆盖原图

### 支持格式
- **输入格式**：JPEG, PNG, BMP, TIFF（PNG支持透明通道）
- **输出格式**：JPEG, PNG（用户可选择）

### 水印类型
- ✏️ **文本水印**：自定义文本内容、字体、字号、颜色、透明度
- 🖼️ **图片水印**：支持PNG透明通道，可调节大小和透明度
- 🎨 **高级样式**：阴影、描边效果，增强可读性

### 水印布局与样式
- 👁️ **实时预览**：所有调整实时显示效果
- 📍 **位置控制**：九宫格布局 + 手动拖拽定位
- 🔄 **旋转功能**：任意角度旋转水印
- 🎛️ **透明度调节**：0-100%透明度控制

### 配置管理
- 💾 **水印模板**：保存/加载水印设置
- 🔄 **自动加载**：程序启动时自动加载上次设置

## 📦 安装与运行

### 方法一：直接运行Python脚本
```bash
# 安装依赖
pip install -r requirements.txt

# 运行应用
python watermark_gui.py
```

### 方法二：下载预编译版本
前往 [Releases](https://github.com/wuyii8941/watermark/releases) 页面下载对应平台的预编译版本：
- **Windows**: `WatermarkApp-Windows.zip`
- **MacOS**: `WatermarkApp-MacOS.zip`

## 🛠️ 开发与构建

### 环境要求
- Python 3.9+
- Pillow 10.0.0+
- piexif 1.1.3+

### 本地构建
```bash
# 安装构建依赖
pip install pyinstaller

# 运行构建脚本
python build.py
```

### GitHub Actions 自动构建
项目配置了GitHub Actions工作流，在推送标签时自动构建并发布：
```bash
git tag v1.0.0
git push origin v1.0.0
```

## 📖 使用指南

### 1. 导入图片
- 点击"选择图片"按钮或直接将图片拖拽到应用窗口
- 支持批量选择多个图片文件
- 支持导入整个文件夹

### 2. 设置水印
#### 文本水印
- 在文本框中输入水印内容
- 选择字体、字号、颜色
- 调节透明度和样式效果

#### 图片水印
- 点击"选择水印图片"选择Logo或图片
- 调节水印大小和透明度
- 支持PNG透明通道

### 3. 调整位置
- 使用九宫格按钮快速定位
- 直接在预览图上拖拽水印到任意位置
- 使用旋转滑块调整水印角度

### 4. 导出图片
- 选择输出文件夹（默认禁止导出到原文件夹）
- 设置文件命名规则：原文件名、添加前缀/后缀
- 对于JPEG格式，可调节图片质量（0-100）
- 可选图片尺寸调整功能

### 5. 模板管理
- 保存当前设置为模板
- 加载已保存的模板
- 删除不需要的模板

## 🗂️ 项目结构

```
watermark/
├── watermark_gui.py          # 主GUI应用
├── watermark.py              # 命令行版本
├── build.py                  # 构建脚本
├── build.spec               # PyInstaller配置
├── requirements.txt          # 依赖列表
├── test_watermark_image.py   # 测试水印图片生成
├── create_test_image.py      # 测试图片生成
├── test_watermark.png        # 测试水印图片
├── test_images/              # 测试图片目录
└── .github/workflows/        # GitHub Actions配置
    └── build.yml
```

## 🔧 技术栈

- **GUI框架**: tkinter (Python标准库)
- **图像处理**: Pillow (PIL)
- **EXIF处理**: piexif
- **打包工具**: PyInstaller
- **跨平台**: Windows, MacOS

## 📝 版本历史

### v1.0.0 (当前版本)
- ✅ 完整的GUI界面
- ✅ 文本水印功能
- ✅ 图片水印功能
- ✅ 实时预览
- ✅ 批量处理
- ✅ 模板管理
- ✅ 跨平台支持

### v0.1.0 (初始版本)
- ✅ 命令行版本
- ✅ EXIF水印功能
- ✅ 批量处理

## 🐛 问题反馈

如果您遇到任何问题或有功能建议，请通过以下方式反馈：
1. 在GitHub仓库创建Issue
2. 提供详细的错误描述和复现步骤
3. 附上相关的截图或日志

## 📄 许可证

MIT License

---

**注意**: 这是一个本地应用，所有图片处理都在您的计算机上进行，不会上传到任何服务器。
